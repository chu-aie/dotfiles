#!/bin/bash
# {{ if eq .chezmoi.os "linux" "darwin" }}
# {{ template "scripts-library" }}
log_task "40. Setting up SSH, AGE, and GPG keys"

GITHUB_USERNAME=${GITHUB_USERNAME:-"{{ .github.username }}"}
GITHUB_TOKEN=${GITHUB_TOKEN:-"{{ .github.token }}"}
export GITHUB_USERNAME
export GITHUB_TOKEN

# before generating SSH keys, you can install them from the dotdrop repository
# {{ if .dotdrop.enabled }}

# shellcheck source=/dev/null
source "${HOME}/.local/bin/dotfiles-setup-dotdrop"

# {{ end }}

# shellcheck source=/dev/null
source "${HOME}/.local/bin/dotfiles-setup-ssh"

# shellcheck source=/dev/null
source "${HOME}/.local/bin/dotfiles-setup-age"

export GPG_PASSPHRASE="{{ .gnupg.passphrase }}"
# shellcheck source=/dev/null
source "${HOME}/.local/bin/dotfiles-setup-gpg"

# shellcheck source=/dev/null
source "${HOME}/.local/bin/dotfiles-setup-github-keys"

log_info "Done setting up SSH, AGE, and GPG keys"

# {{ end -}}
