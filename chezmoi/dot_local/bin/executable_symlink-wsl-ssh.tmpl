{{- if .system.is_wsl }}
#!/bin/bash

# {{ template "scripts-library" }}

WIN_HOME="$(wslpath -a "$(wslvar USERPROFILE)")"

if [[ -d "${WIN_HOME}" ]]; then

  # if ${HOME}/.ssh does not exist, create it
  if [[ ! -e "${HOME}/.ssh" ]]; then
    log_task "Creating ${HOME}/.ssh"
    c mkdir "${HOME}/.ssh"
  fi
  # if {WIN_HOME}/.ssh exists, copy files to {HOME}/.ssh if they don't exist and remove {WIN_HOME}/.ssh
  if [[ -d "${WIN_HOME}/.ssh" ]]; then
    log_task "Copying files from ${WIN_HOME}/.ssh to ${HOME}/.ssh"
    c cp -n "${WIN_HOME}/.ssh"/* "${HOME}/.ssh"
    log_task "Removing existing ${WIN_HOME}/.ssh"
    c rm -rf "${WIN_HOME}/.ssh"
  fi
  # move {HOME}/.ssh to {WIN_HOME}/.ssh
  log_task "Moving ${HOME}/.ssh to ${WIN_HOME}/.ssh"
  c mv "${HOME}/.ssh" "${WIN_HOME}/.ssh"
  # symlink {WIN_HOME}/.ssh to {HOME}/.ssh
  log_task "Symlinking .ssh folder from Windows to WSL"
  c ln -s "${WIN_HOME}/.ssh" "${HOME}/.ssh"

fi
# {{ end -}}